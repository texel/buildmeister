#!/usr/bin/env ruby

require File.expand_path(File.dirname(__FILE__) + "/../lib/buildmeister")

begin
  command = ARGV.shift
  args    = ARGV.dup
  ARGV.clear
  
  Buildmeister::Base.new(*args).send command
rescue Interrupt => i
  Buildmeister::Notifier.post("Buildmeister Shut Down", "Goodbye!")
  puts "\rThank you for using Buildmeister!"
rescue Exception => e
  Buildmeister::Notifier.post("Buildmeister Error: #{e.class}", e.message)
  puts "Quitting Buildmeister due to error: #{e.message}"
  puts e.backtrace
end
